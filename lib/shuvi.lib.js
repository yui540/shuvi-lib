var Shuvi,bind=function(t,i){return function(){return t.apply(i,arguments)}};Shuvi=function(){function t(t){this.onError=bind(this.onError,this),this.onReady=bind(this.onReady,this),this.version="0.0.1",this.author="yuki540",this.twitter="https://twitter.com/eriri_jp",this.github="https://github.com/yuki540net/shuvi-lib",this.art(),this.id=t.id,this.video_id=t.video_id,this.width=t.width,this.height=t.height,this.first=!1,this.load=!1,this.timer=null,this.loop=!1,this.listeners=[],this.player=null,this.init()}return t.prototype.art=function(){return console.log(""),console.log("shuvi-lib -> version "+this.version),console.log("  - author:     "+this.author),console.log("  - twitter:    "+this.twitter),console.log("  - repository: "+this.github),console.log("")},t.prototype.init=function(){var t;return t=document.createElement("script"),t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=function(t){return function(){return t.render(t.video_id)}}(this)},t.prototype.emit=function(t,i){var e,o,r,n,s;for(n=this.listeners,s=[],e=0,o=n.length;e<o;e++)r=n[e],t===r.event?s.push(r.fn(i)):s.push(void 0);return s},t.prototype.on=function(t,i){return this.listeners.push({event:t,fn:i})},t.prototype.render=function(t){return this.video_id=t,this.player=new YT.Player(this.id,{width:this.width,height:this.height,videoId:t,events:{onReady:this.onReady,onError:this.onError}})},t.prototype.onReady=function(t){return this.first?(this.load=!0,this.emit("load",{video_id:this.video_id})):(this.change(this.video_id),void(this.first=!0))},t.prototype.onError=function(t){return this.load=!1,this.emit("error",{video_id:this.video_id})},t.prototype.change=function(t){var i,e,o;if(this.load=!1,this.video_id=t,e="https://www.youtube.com/embed/",o="?enablejsapi=1&widgetid=1&controls=0&showinfo=0",i=document.getElementById(this.id),i.src=e+this.video_id+o,this.first)return this.emit("change",{video_id:this.video_id})},t.prototype.play=function(){return!!this.load&&(this.player.playVideo(),this.emit("play",{video_id:this.video_id}),this.timer=setInterval(function(t){return function(){var i,e;return e=t.duration(),i=t.current(),e<=i&&(t.emit("end",{video_id:t.video_id,current:i,duration:e,per:i/e}),t.loop&&t.seek(0)),t.emit("seek",{video_id:t.video_id,current:i,duration:e,per:i/e})}}(this),100),!0)},t.prototype.pause=function(){return!!this.load&&(this.player.pauseVideo(),this.emit("pause",{video_id:this.video_id}),clearInterval(this.timer),!0)},t.prototype.loop=function(t){return this.loop=!0===t},t.prototype.seek=function(t){var i,e;return!!this.load&&(e=this.duration(),i=e*t,this.player.seekTo(i),this.emit("seek",{video_id:this.video_id,current:i,duration:e,per:i/e}),!0)},t.prototype.duration=function(){return this.player.getDuration()},t.prototype.current=function(){return this.player.getCurrentTime()},t.prototype.buffer=function(){return this.player.getVideoLoadedFraction()},t.prototype.getVolume=function(){return this.player.getVolume()},t.prototype.setVolume=function(t){return!!this.load&&(this.player.setVolume(100*t),!0)},t.prototype.resize=function(t,i){return this.width=t,this.height=i,this.player.setSize(this.width,this.height),this.emit("resize",{width:this.width,height:this.height})},t.prototype.getId=function(t){var i;return!!(i=t.match(/v=.*/))&&(i=i[0].split("&"),i[0].replace(/^v=/,""))},t}();